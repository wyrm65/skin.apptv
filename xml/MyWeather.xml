<?xml version="1.0" encoding="UTF-8"?>
<window>
	<defaultcontrol always="true">6000</defaultcontrol>
	<menucontrol>9000</menucontrol>
	<backgroundcolor>black</backgroundcolor>
	<visible>Window.IsTopMost(weather)</visible>
	<controls>
		<control type="group">
			<!-- Dim screen for fake Screen settings dialog -->
			<animation effect="fadediffuse" start="FFFFFFFF" end="FF404040" time="100" condition="$EXP[isEnabledScreenSettings]">Conditional</animation>
			<include>background-weather</include>
			<control type="group">
				<visible>!$EXP[isActiveFullscreenWindow]</visible>
				<control type="button" id="6000"><!-- Fake button to steal focus, don't show if Open weather map screen is showing -->
					<onleft>9000</onleft>
					<onright>noop</onright>
					<texturefocus>blank.png</texturefocus>
					<texturenofocus>blank.png</texturenofocus>
					<onclick>noop</onclick>
					<visible>![String.IsEqual(Skin.String(weather-view),$LOCALIZE[33035]) + [String.Contains(Weather.plugin,weather.openweathermap.extended) | String.Contains(Weather.plugin,weather.gismeteo)]]</visible>
				</control>
				<control type="label"><!-- Weather heading -->
					<left>1400</left>
					<top>30</top>
					<width>476</width>
					<height>48</height>
					<label>$LOCALIZE[31032]</label>
					<font>apptv30</font>
				</control>
				<control type="group">
					<visible>Weather.IsFetched</visible>
					<control type="group">
						<visible>!String.IsEmpty(Window(weather).Property(WeatherProviderLogo))</visible>
						<control type="image"><!-- Weather provider logo -->
							<left>27</left>
							<top>4</top>
							<width>270</width>
							<height>68</height>
							<colordiffuse>DropShadow</colordiffuse>
							<aspectratio>keep</aspectratio>
							<texture>$INFO[Window(weather).Property(WeatherProviderLogo)]</texture>
						</control>
						<control type="image"><!-- Weather provider logo (shadow) -->
							<left>26</left>
							<top>3</top>
							<width>270</width>
							<height>68</height>
							<aspectratio>keep</aspectratio>
							<texture>$INFO[Window(weather).Property(WeatherProviderLogo)]</texture>
						</control>
					</control>
					<control type="label"><!-- Weather provider -->
						<left>26</left>
						<top>3</top>
						<width>954</width>
						<height>30</height>
						<font>apptv22</font>
						<label>$INFO[Window(weather).Property(WeatherProvider),$LOCALIZE[31536] - ]</label>
						<visible>String.IsEmpty(Window(weather).Property(WeatherProviderLogo))</visible>
					</control>
					<control type="label"><!-- Weather location -->
						<left>26</left>
						<top>75</top>
						<width>954</width>
						<height>56</height>
						<font>apptv25</font>
						<label>$INFO[Window(weather).Property(Location)]</label>
					</control>
				</control>
				<include file="Includes_Weather.xml">standardweather</include>
				<include condition="String.Contains(Weather.plugin,weather.ozweather)" file="Includes_Weather.xml">ozweather</include>
				<include condition="String.Contains(Weather.plugin,weather.openweathermap.extended) | String.Contains(Weather.plugin,weather.gismeteo)" file="Includes_Weather.xml">openweatherextended</include>
				<control type="label"><!-- Updated -->
					<left>1350</left>
					<top>1028</top>
					<width>555</width>
					<height>38</height>
					<font>apptv20</font>
					<align>right</align>
					<label>$LOCALIZE[31531] $INFO[Window(weather).Property(Updated)]</label>
					<visible>!String.IsEmpty(Window(weather).Property(Updated))</visible>
				</control>
				<!-- Show a iOS style page indicator to show which focus group has the current focus -->
				<!-- Focus group can be hidden or shown but is potentially focusable, that is it has not be disabled -->
				<control type="group">
					<visible>Weather.IsFetched | !String.EndsWith(Window(weather).Property(Current.ConditionIcon),na.png)</visible><!-- Don't show markers if no forecast shown -->
					<control type="group">
						<include content="page-indicator">
							<param name="indicatorleft" value="864" />
							<param name="indicatortop" value="0" />
							<param name="indicatorwidth" value="192" />
							<param name="indicatorheight" value="48" />
							<param name="indicatororientation" value="horizontal" />
							<param name="grp1indicate" value="[ControlGroup(9000).HasFocus()|String.IsEqual(Window(home).Property(ShowScreenSettings),show)]" />
							<param name="grp1visible" value="[!Skin.HasSetting(lock-screensettings)]" />
							<param name="grp2indicate" value="![ControlGroup(9000).HasFocus()|String.IsEqual(Window(home).Property(ShowScreenSettings),show)]" />
							<param name="grp2visible" value="[true]" />
						</include>
					</control>
				</control>
				<include>touch-controls</include>
			</control>
		</control>
		<control type="group"><!-- Screen Settings Menu -->
			<left>0</left>
			<top>1080</top>
			<include>screen-settings</include>
			<control type="image"><!-- Button background -->
				<left>622</left>
				<top>114</top>
				<width>672</width>
				<height>820</height>
				<texture border="14">button-menu-background.png</texture>
			</control>
			<control type="label"><!-- Dialog heading -->
				<left>638</left>
				<top>126</top>
				<width>639</width>
				<height>51</height>
				<font>apptv23</font>
				<label>$LOCALIZE[31557]$INFO[Container(9000).NumItems, (,)]</label>
				<align>center</align>
			</control>
			<control type="button"><!-- Touch Close button -->
				<left>1262</left>
				<top>98</top>
				<width>48</width>
				<height>48</height>
				<texturefocus>touch-close.png</texturefocus>
				<texturenofocus>touch-close.png</texturenofocus>
				<onclick condition="!String.IsEqual(Window(home).Property(ShowScreenSettings),show)">SetProperty(ShowScreenSettings,show,home)</onclick>
				<onclick condition="String.IsEqual(Window(home).Property(ShowScreenSettings),show)">ClearProperty(ShowScreenSettings,home)</onclick>
				<visible>$EXP[isEnabledTouch]</visible>
			</control>
			<include content="page-offscreen-vertical">
				<param name="indicator1left" value="942"/>
				<param name="indicator1top" value="180"/>
				<param name="indicator2left" value="942"/>
				<param name="indicator2top" value="898"/>
				<param name="indicatorsize" value="32"/>
				<param name="indicatorcontainer" value="9000"/>
			</include>
			<control type="grouplist" id="9000">
				<defaultcontrol>200</defaultcontrol>
				<left>638</left>
				<top>206</top>
				<width>640</width>
				<height>700</height>
				<itemgap>0</itemgap>
				<onright>ClearProperty(ShowScreenSettings,home)</onright>
				<onright>6000</onright>
				<onleft>ClearProperty(ShowScreenSettings,home)</onleft>
				<onleft>6000</onleft>
				<control type="button" id="200"><!-- View (types of forecasts) -->
					<include>settings-screen-common</include>
					<label>$LOCALIZE[31562] $VAR[WeatherView]</label>
					<onclick>$VAR[WeatherViewAction]</onclick>
				</control>
				<control type="spincontrolex" id="3"><!-- Change location -->
					<include>settings-screen-common</include>
					<label>$LOCALIZE[21873] - </label>
				</control>
				<control type="button" id="2"><!-- Refresh -->
					<include>settings-screen-common</include>
				</control>
				<control type="button" id="208"><!-- Custom Weather Backgrounds -->
					<include>settings-screen-common</include>
					<label>$LOCALIZE[31866]</label>
					<onclick condition="!System.HasAddon(script.image.resource.select)">InstallAddon(script.image.resource.select)</onclick>
					<onclick condition="System.HasAddon(script.image.resource.select)">SetFocus(6000)</onclick>
					<onclick condition="System.HasAddon(script.image.resource.select)">
						RunScript(script.image.resource.select,type=resource.images.weatherfanart&amp;property=background-customweather)</onclick>
				</control>
				<control type="button" id="209"><!-- Custom Weather Icons -->
					<include>settings-screen-common</include>
					<label>$LOCALIZE[31873]</label>
					<onclick condition="!System.HasAddon(script.image.resource.select)">InstallAddon(script.image.resource.select)</onclick>
					<onclick condition="System.HasAddon(script.image.resource.select)">SetFocus(6000)</onclick>
					<onclick condition="System.HasAddon(script.image.resource.select)">
						RunScript(script.image.resource.select,type=resource.images.weathericons&amp;property=custom-weathericons)</onclick>
				</control>
				<control type="radiobutton" id="210"><!-- Alerts  -->
					<include>settings-screen-common</include>
					<label>$LOCALIZE[33050]</label>
					<onclick>Skin.ToggleSetting(weather-alerts)</onclick>
					<selected>Skin.HasSetting(weather-alerts)</selected>
					<radioposx>495</radioposx>
					<enable>String.Contains(Weather.plugin,weather.openweathermap.extended)</enable>
				</control>
				<control type="button" id="4"><!-- Settings -->
					<include>settings-screen-common</include>
					<label>$LOCALIZE[1390]</label>
					<onclick>ActivateWindow(servicesettings,weather)</onclick>
					<onclick>Skin.SetString(weather-view,$LOCALIZE[10508])</onclick><!-- Reset to standard weather view just in case provider changes -->
				</control>
			</control>
		</control>
	</controls>
</window>